<html>
<head>
<title> Karaoke </title>

<script src="lyrics.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>  
<script src="http://cdn-files.deezer.com/js/min/dz.js"></script>

</head>

<style>
#trackLinks{
	float:right;
	right: 20px;
	top: 20px;
}
</style>
<body>
<h1> Karaoke </h1>

<script>
console.log("START Karaoke");
//lyrics = getTrackLyrics("Help","Beatles");
//console.log("current track lyrics", lyrics);

var karaokePlaying = 0;
var karaokeCurrentTime = 0;


DZ.init({
	appId  : '116247',
	channelUrl : 'http://kadrik.github.io/deezerkaraoke/'
});
DZ.ready(function() {
	DZ.Event.subscribe('current_track', function(track, evt_name){
		console.log("current track object", track);
		title = track.track.title;
		artist = track.track.artist.name;
		duration = track.track.duration;
		$("#currentTrack").html(title +" <i>By</i> "+ artist);
		lyrics = getTrackLyrics(title, artist, duration, function() {
			if (lyrics != null) {
				console.log("current track lyrics", lyrics);
				$("#lyrics").html(getWholeLyrics(lyrics));
			}
			else {
				$("#lyrics").html("");				
			}
		});
	});
        //DZ.Event.subscribe('player_play', function(args, evt_name){
        //   karaokePlaying = 1;
        //   karaokeCurrentTime = 0;
        //   setTimeout(displayLyrics, 500);
        //});
});


function play(trackId) {
	DZ.player.playTracks([trackId], 0, function(response){
		console.log("track list", response.tracks);
	});	
}


function displayLyrics()
{
   karaokeCurrentTime+=0.5;
   $("#dynamiclyrics").html(getLyricsWithTime(karaokeCurrentTime));
   if (karaokePlaying)
     setTimeout(displayLyrics, 500);
}



console.log("END Karaoke");

</script>


<div id="trackLinks">
	<ul>
	<li><a href="#" onClick="play(4601933)"> Bad romance <i>by</i> Lady Gaga</a>
	<li><a href="#" onClick="play(12565421)"> Sexy and I know it <i>by</i> LMFAO </a>
	<li><a href="#" onClick="play(66609426)"> Get Lucky <i>by</i> Daft Punk </a>
	<li><a href="#" onClick="play(10420672)"> Like a Hobo <i>by</i> Charlie Winston </a>
 	<li><a href="#" onClick="play(3135553)">One More Time <i>by</i> Daft Punk </a>
		
	</ul>
</div>

<div id="dynamiclyrics">
</div>

<div id="currentTrack">
</div>

<div id="lyrics">
</div>


<div id="debug">
</div>

</body>
</html>
